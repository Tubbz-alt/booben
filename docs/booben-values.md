# BoobenValue
#### Basics
BoobenValue - это одна из центральных концепций в booben. Объект BoobenValue содержит
инструкции для получения одного произвольного значения во время работы
приложения.

BoobenValue содержит два поля: `source` и `sourceData`. `source` определяет,
откуда нужно взять значение, а `sourceData` - параметры, специфичные для этого
`source`.

В booben после загрузки проекта, он трансформинуется в immutable структуры
данных. BoobenValue из plain JS объекта преобразуется в immutable Record, который
определен в файле [app/src/models/BoobenValue.js](../app/src/models/BoobenValue.js).

Все возможные значения для `source` определены в этом же файле и доступны через
`BoobenValue.Source`.

Далее будут рассмотрены BoobenValue с различными `source`.

#### const
Используется для значений, не допускающих редактирования.
Такое BoobenValue просто содержит в себе готовое значение, не требующее
преобразований. Оно находится в `sourceData.value` в виде plain JS value.

#### static
Представляет значение, заданное пользователем вручную в UI booben.
Так же, как и у `const`, `sourceData` содержит одно поле `value`, но в отличие
от `const`, если в нем содержится не примитивное значение, а массив или объект,
он будет преобразован в immutable List или Map, а его элементы также будут
являться BoobenValue, причём с любым `source`.

#### routeParams
Говорит о том, что взять значение нужно из параметров роута (например значение
`foo_id` в `/path/to/foo/:foo_id`). `sourceData` содержит два поля: `routeId`
(число) и `paramName` (имя параметра без двоеточия). В booben в режиме
конструирования настоящего react-router'а нет, поэтому берется пример значения
параметра, заданный пользователем при создании роута. В режиме превью
приложения берется настоящее значение, полученное от react-router.

#### data
Содержит путь в GraphQL схеме, по которому нужно получить с сервера требуемое
значение, и значения всех аргументов полей также в виде BoobenValue.
TODO: Описать подробнее

#### function
Инструкция выполнить функцию, созданную пользователем или встроенную в booben
(таких пока нет), и взять возвращенное ей значение в качестве результата.
`sourceData` содержит поля `functionSource`, которое может быть `project`
(пользовательская функция) или `builtin` (встроенная функция), `function` -
имя функции и `args` - immutable List из BoobenValue, из которых нужно получить
значения аргументов.

#### designer
Результатом вычисления такого BoobenValue будет react-компонент. `sourceData`
содержит поля `components` и `rootId` - дерево компонентов в нормализованном
виде.

#### ownerProp
Может встречаться только в компонентах, находящихся в дереве внутри BoobenValue с
source, равным designer. Говорит о том, что нужно взять значение из props,
переданных компоненту, который был результатом вычисления designer BoobenValue.
`sourceData` содержит единственное поле `ownerPropName` - имя пропа.
Простейшим примером использования связки designer и ownerProp служит встроенный
компонент List.

#### state
Результат нужно взять из состояния другого компонента. `sourceData` содержит
поля `componentId` - id компонента из того же дерева, где находится компонент
с этим BoobenValue, и `stateSlot` - имя state slot'а откуда нужно взять значение.
Используется в основном для вытаскивания значений из контролов (инпутов,
чекбоксов и т.п.).
TODO: Описать механизм state slots.

#### actions
Результатом будет функция, выполняющая последовательность действий. Действия
описаны в `sourceData.actions` (immutable List).

#### actionArg
Может встречаться только в BoobenValues, находящихся внутри действий. Говорит о
том, что значение нужно взять из аргумента функции, получившейся в результате
вычисления BoobenValue с source, равным actions. `sourceData` содержит
единственное поле `arg` - номер аргумента.


[Назад](./index.md)
